{"version":3,"file":"isHoverEnabled.js","sourceRoot":"","sources":["../src/isHoverEnabled.ts"],"names":[],"mappings":"AAAA,eAAe;AACf,qFAAqF;AAErF,OAAO,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAE1D,IAAI,SAAS,GAAG,KAAK,CAAC;AAEtB,IAAI,SAAS,EAAE;IACb;;;;;;;OAOG;IACH,MAAM,kBAAkB,GAAG,IAAI,CAAC;IAChC,IAAI,kBAAkB,GAAG,CAAC,CAAC;IAE3B,SAAS,WAAW;QAClB,IAAI,SAAS,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,kBAAkB,GAAG,kBAAkB,EAAE;YACrE,OAAO;SACR;QACD,SAAS,GAAG,IAAI,CAAC;IACnB,CAAC;IAED,SAAS,YAAY;QACnB,kBAAkB,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAChC,IAAI,SAAS,EAAE;YACb,SAAS,GAAG,KAAK,CAAC;SACnB;IACH,CAAC;IAED,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;IAC5D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;IAC3D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;CAC3D;AAED,eAAe,GAAG,EAAE,CAAC,SAAS,CAAC","sourcesContent":["// By @necolas:\n// https://github.com/necolas/react-native-web/blob/master/docs/guides/web-recipes.md\n\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\n\nlet isEnabled = false;\n\nif (canUseDOM) {\n  /**\n   * Web browsers emulate mouse events (and hover states) after touch events.\n   * This code infers when the currently-in-use modality supports hover\n   * (including for multi-modality devices) and considers \"hover\" to be enabled\n   * if a mouse movement occurs more than 1 second after the last touch event.\n   * This threshold is long enough to account for longer delays between the\n   * browser firing touch and mouse events on low-powered devices.\n   */\n  const HOVER_THRESHOLD_MS = 1000;\n  let lastTouchTimestamp = 0;\n\n  function enableHover() {\n    if (isEnabled || Date.now() - lastTouchTimestamp < HOVER_THRESHOLD_MS) {\n      return;\n    }\n    isEnabled = true;\n  }\n\n  function disableHover() {\n    lastTouchTimestamp = Date.now();\n    if (isEnabled) {\n      isEnabled = false;\n    }\n  }\n\n  document.addEventListener('touchstart', disableHover, true);\n  document.addEventListener('touchmove', disableHover, true);\n  document.addEventListener('mousemove', enableHover, true);\n}\n\nexport default () => isEnabled;\n"]}